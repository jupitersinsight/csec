Password Spray.
---------------

Also known as "Reverse Brute-Force Attack" consists into using one single passwords and many usernames.
All usernames gathered along the way (information gathering + post-exploitation) may come in handy for this attack.

Example:
Once a username list is ready, smtp-enum Metasploit module can help in validating which usernames are valid for a SPECIFIC
SMTP server [TARGET]. The resulting list of validated usernames will help increasing the chance of success for the 
password spray attack against SMTP.

A common tool used for Password Spray attack is THC_Hydra.
Common target services: smtp, ssh, smb (Metasploit "smb_login"), OutlookWebAccess (Metasploit "owa_login").

One or two passwords is the maximum number of passwords to use to avoid detection.
Wait at leat 45 minutes between each "PSpray" sessions in order to avoid lockouts or detection.



RS.
Statistically Likely Usernames: https://github.com/insidetrust/statistically-likely-usernames



SAMBA Exploitation.
--------------------

Quite common in linux environments, happens to be a very good target.
The first step before actually exploiting samba is to identify the version in use.
Nmap script "smb-os-discovery" against samba port (usually 445), will return the version of the service in use onto the target system.
Once the version is known it's time to search for vulnerabilities and exploits, exploit-db or searchsploit will help.

Examples.
. Username Map Script (CVE-2007-2447): affects samba server whose configurations has the "username map script" option enabled. This vulnerabilities allows for RCE which may results in a reverse shell. Metasploit does include an exploitation
 module that requires only 2 parameters, LHOST and RHOST.
. SAMBA Symlink Directory Traversal: relies on a SAMBA vulnerability that allows an attacker to create, in a read-writable
 folder to create a symlink pointing to the root directory. From there it is possible to download (get) and upload (put)
  files onto the victim system (full volume access). "smbmap" helps in finding read-writable folders while Metasploit module "samba_symlink_traversal" handles the creation of the symlink. "smbclient" is used to connect to the SAMBA
   server/share and from there get or put files from and onto the remote system.
   
.. Exploiting a fully patched SMB server which offers a read-writable network share, "www" in this case, with Perl installed:
1) SMB Version identification via NMAP (see above) and smbmap (see above);
2) Connect to the shared resource and test write permissions;
3) Once the write permissions are found to be working, it's time to upload a perl script which will bring to life a shell, a reverse one (example location for a webshell "/usr/share/webshells/perl".
4) Light up a listener and on the remote machine run the script.


